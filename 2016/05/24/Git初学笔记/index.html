<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Git学习笔记 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="参考：廖雪峰的Git教程
##安装Git  

在Linux上安装 Ubuntu：sudo apt-get install git  
在Windows上安装  
安装msysgit，按照默认选项安装即可  
安装完成之后运行Git Bash，打开命令行窗口  



##基本概念

工作区：电脑中的目录  
版本库：  
工作区的隐藏目录.git  
其中最重要的是暂存区stage，第一个分支m">
<meta property="og:type" content="article">
<meta property="og:title" content="Git学习笔记">
<meta property="og:url" content="http://yoursite.com/2016/05/24/Git初学笔记/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="参考：廖雪峰的Git教程
##安装Git  

在Linux上安装 Ubuntu：sudo apt-get install git  
在Windows上安装  
安装msysgit，按照默认选项安装即可  
安装完成之后运行Git Bash，打开命令行窗口  



##基本概念

工作区：电脑中的目录  
版本库：  
工作区的隐藏目录.git  
其中最重要的是暂存区stage，第一个分支m">
<meta property="og:image" content="https://zhayh.github.io/images/git/stage.png">
<meta property="og:updated_time" content="2016-05-24T03:05:18.437Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Git学习笔记">
<meta name="twitter:description" content="参考：廖雪峰的Git教程
##安装Git  

在Linux上安装 Ubuntu：sudo apt-get install git  
在Windows上安装  
安装msysgit，按照默认选项安装即可  
安装完成之后运行Git Bash，打开命令行窗口  



##基本概念

工作区：电脑中的目录  
版本库：  
工作区的隐藏目录.git  
其中最重要的是暂存区stage，第一个分支m">
<meta name="twitter:image" content="https://zhayh.github.io/images/git/stage.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Git初学笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/24/Git初学笔记/" class="article-date">
  <time datetime="2016-05-24T03:18:55.000Z" itemprop="datePublished">2016-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Git学习笔记
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考：<a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="external">廖雪峰的Git教程</a></p>
<p>##安装Git  </p>
<ol>
<li>在Linux上安装<br> Ubuntu：sudo apt-get install git  </li>
<li>在Windows上安装  <ul>
<li>安装<a href="http://msysgit.github.io" target="_blank" rel="external">msysgit</a>，按照默认选项安装即可  </li>
<li>安装完成之后运行Git Bash，打开命令行窗口  </li>
</ul>
</li>
</ol>
<p>##基本概念</p>
<ol>
<li>工作区：电脑中的目录  </li>
<li>版本库：  <ul>
<li>工作区的隐藏目录.git  </li>
<li>其中最重要的是暂存区stage，第一个分支master和指向master的指针HEAD  </li>
<li>不在暂存区中的文档是不能被commit到分支的    </li>
</ul>
</li>
<li><p>工作区、暂存区的关系 </p>
<p>  <img src="https://zhayh.github.io/images/git/stage.png" alt=""></p>
</li>
</ol>
<p>##配置Git</p>
<ol>
<li>git config –global color.ui true  </li>
<li><p>配置别名： </p>
<p>   git config –global alias.unstage ‘reset HEAD’<br>   git config –global alias.lg “log –color –graph –pretty=format:’%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset’ –abbrev-commit”  </p>
</li>
</ol>
<p>##创建版本库</p>
<ol>
<li><p>初始化Git仓库</p>
<p>   mkdir LearnGit<br>   cd /F/LearnGit<br>   git init  </p>
</li>
<li><p>添加文件  </p>
<p>   git add readme.txt<br>   git commit -m “wrote a readme file”  </p>
<p>说明：</p>
<ul>
<li>创建的文件一定放在Git仓库的目录或子目录下  <ul>
<li>add将文件添加到暂存区  </li>
<li>commit将暂存区的所有内容提交到当前分支  </li>
<li>-m后面输入本次提交的说明  </li>
</ul>
</li>
</ul>
</li>
</ol>
<p>##查看、修改和提交 </p>
<ol>
<li>查看Git工作区的状态：git status  </li>
<li>查看文件的修改内容：git diff readme.txt  </li>
<li><p>提交修改和提交文件的步骤一样，分两步：  </p>
<p>   git add readme.txt<br>   git commit -m “add git command”  </p>
</li>
</ol>
<p>##版本回退</p>
<ol>
<li>查看提交历史：git log / git log –pretty=oneline</li>
<li>回退上一个版本：git reset –hard HEAD^ </li>
<li>查看历史命令：git reflog</li>
<li>说明：HEAD指向当前版本</li>
</ol>
<p>##撤销修改</p>
<ol>
<li>git checkout – readme.txt，撤销该文件在工作区的修改，说明：<ul>
<li>文件没放到暂存区，撤销修改就回到版本库的状态</li>
<li>文件已添加到暂存区后又作了修改，撤销修改就回到添加到暂存区后的状态</li>
<li>也就是回到最近一次git commithuo git add状态</li>
</ul>
</li>
<li>git reset HEAD readme.txt，撤销暂存区的修改</li>
<li>举例说明：<ul>
<li>场景1：当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改，用git checkout – file。</li>
<li>场景2：当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用git reset HEAD file，就回到了场景1，第二步按场景1操作。</li>
<li>场景3：已经提交了不合适的修改到版本库时，想要撤销本次提交，需进行版本回退操作，前提是没有推送到远程库。</li>
</ul>
</li>
</ol>
<p>##删除文件</p>
<ol>
<li><p>从版本库删除</p>
<p>   rm readme.txt<br>   git rm readme.txt<br>   git commit -m “remove readme.txt”</p>
</li>
<li><p>工作区删除后从版本库恢复，会丢失最近一次提交后修改的内容</p>
<p>   git checkout – readme.txt</p>
</li>
</ol>
<p>##远程仓库</p>
<ol>
<li>创建SSH Key：ssh-keygen -t rsa -C “GitHub邮箱地址”</li>
<li>登陆GitHub，打开Account Settings -&gt; SSH Keys页面，点击Add SSH Key，将生成的id_rsa.pub的内容拷贝到key内容框</li>
<li>需要在每台推送到GitHub的电脑上生成key，并添加到GitHub</li>
</ol>
<p>##添加远程库</p>
<ol>
<li>登陆GitHub，点击Create a new repo，创建一个新的仓库</li>
<li>Repository name填入仓库名称，其他保持默认设置，创建Git仓库</li>
<li>将本地仓库推送到GitHub仓库：<ul>
<li>关联远程库：<code>git remote add origin git@github.com:path/repo-name.git</code></li>
<li>第一次推送：git push -u origin master，-u参数：将本地master分支内容推送到远程新的master分支，并关联本地的master分支和远程的master分支，在以后的推送或拉取时就可以简化命令</li>
<li>本地提交后的推送命令：git push origin master</li>
</ul>
</li>
</ol>
<p>##从远程库克隆</p>
<ol>
<li>git clone <code>git@github.com:zhayh/python.git</code>  </li>
<li>也可以用 <code>https://github.com/zhayh/python.git</code> 克隆  </li>
<li>Git支持多种协议，默认的git：//使用ssh，速度最快  </li>
</ol>
<p>##创建与合并分支</p>
<ol>
<li>创建并切换分支：git checkout -b dev </li>
<li>查看分支：git branch, 当前分支用*标识</li>
<li>创建分支：git branch name</li>
<li>切换分支：git checkout master</li>
<li>合并分支到当前分支：git merge dev</li>
<li>删除分支：git branch -d name</li>
</ol>
<p>##解决冲突</p>
<ol>
<li>执行git merge dev时提示内容冲突，手动修改冲突的内容，然后执行git add readme.txt和git commit -m “message”，master和dev就合并了</li>
<li>查看分支的合并情况：git log –graph –pretty=oneline –abbrev-commit</li>
</ol>
<p>##分支管理策略</p>
<ol>
<li>合并分支时，一般Git会用”Fast forward”模式，删除分支后，会丢失分支信息  </li>
<li><p>使用”no-ff”方式merge可以强制禁用”Fast forward”模式   </p>
<p>   git merge –no-ff -m “merge with no-ff” dev</p>
</li>
<li>分支策略<br> master分支应非常稳定，仅用于发布新版本，工作都在dev分支上进行<br> 每个成员都有自己的分支，经常往dev合并即可  </li>
<li>Bug分支  <ul>
<li>隐藏工作现场：git stash</li>
<li>创建一个临时分支修复Bug，修复完成后切换到master分支，完成合并，最后删除临时分支</li>
<li>查看工作现场：git stash list</li>
<li>恢复现场同时删除stash内容：git stash pop</li>
<li>恢复现场：git stash apply</li>
<li>删除stash内容：git stash drop</li>
<li>恢复制定的stash：git stash apply stash@{0}</li>
</ul>
</li>
<li>feature分支<br> 1) 添加一个新功能，可以新建一个feature分支进行，完成后合并，最后删除feature分支<br> 2) 强行删除feature分支开发的新功能：git branch -D feature</li>
<li>多人协作<br> 查看远程库：git remote / git remote -v</li>
<li>推送分支  <ul>
<li>推送到主分支：git push origin master  </li>
<li>推送到其他分支：git push origin dev  </li>
<li>推送的选择：  <ul>
<li>master分支是主分支，要时刻与远程同步  </li>
<li>dev分支是开发分支，也需要与远程同步  </li>
<li>bug分支只用于在本地修复bug，就没必要推送到远程  </li>
<li>feature分支是否推到远程，取决于是否合作在上面开发  </li>
</ul>
</li>
</ul>
</li>
<li><p>抓取分支<br> 1) 从远程库clone，一般只能看到本地的master分支<br> 2) 创建远程origin的dev分支到本地：git checkout -b dev origin/dev<br> 3) 推送冲突的解决：</p>
<pre><code>* 使用git pull将最新的提交从origin/dev抓取下来，在本地合并，解决冲突，再推送
* git pull失败的原因：需指定本地dev分支与远程origin/dev分支的链接
* git branch --set-upstream dev origin/dev
</code></pre></li>
</ol>
<p>##多人协作的工作模式</p>
<ol>
<li>试图用git push origin branch-name推送自己的修改</li>
<li>如果推送失败，则因为远程分支比本地新，需要先用git pull试图合并</li>
<li>如果合并冲突，则解决冲突，并在本地提交</li>
<li>没有冲突或解决了冲突后，再用git push origin branch-name推送就能成功</li>
<li>注意：git pull提示”no tracking information”，则说明本地和远程分支的链接关系没有创建，用git branch –set-upstream branch-name origin/branch-name</li>
</ol>
<p>##创建标签</p>
<ol>
<li>切换到需要打标签的分支：git checkout master</li>
<li>创建新标签：git tag v1.0，只存储在本地</li>
<li>在特定commit id上创建标签：git tag v0.9 commit id</li>
<li>创建带有说明的标签：git tag -a v0.1 -m “message” commit id （-a指定标签名，-m指定说明文字）</li>
<li>用-s指定私钥签名一个标签：git tag -s v0.2 -m “message” commit id，签名采用PGP签名，必须首先安装gpg(GnuPG)</li>
<li>查看所有标签：git tag</li>
<li>查看标签信息：git show v0.9</li>
<li>说明：  <ul>
<li>默认标签是打在最新提交的commit上，标签按字母排序  </li>
<li>查看commit id：git log –pretty=oneline –abbrev-commit  </li>
</ul>
</li>
</ol>
<p>##操作标签</p>
<ol>
<li>删除标签：git tag -d v1.0  </li>
<li>推送标签到远程：git push origin v1.0  </li>
<li>一次性推送所有的标签：git push origin –tags  </li>
<li>删除远程标签<br> 1）先从本地删除：git tag -d v0.9<br> 2）再从远程删除：git push origin :refs/tags/v0.9  </li>
</ol>
<p>##GitHub</p>
<ol>
<li>在GitHub上，可以任意Fork开源仓库；  </li>
<li>自己拥有Fork后的仓库的读写权限；  </li>
<li>可以推送pull request给官方仓库贡献代码。  </li>
</ol>
<p>##忽略特殊文件</p>
<ol>
<li>在Git工作去的根目录创建.gitignore文件，添加要忽略的文件名  </li>
<li>参考：<a href="https://github.com/github/gitignore" target="_blank" rel="external">Git官方ignore模版</a>  </li>
<li>.gitignore文件本身要放到版本库中，并对其进行版本管理  </li>
<li>忽略文件的原则：<br> 1）忽略操作系统自动生成的文件，如缩略图等<br> 2）忽略编译生成的中间文件、可执行文件等<br> 3）忽略带有敏感信息的配置文件，如：存放口令的配置文件  </li>
</ol>
<p>##参考资料</p>
<ul>
<li><a href="http://git-scm.com" target="_blank" rel="external">Git官方网站</a>  </li>
<li><a href="http://try.github.io/levels/1/challenges/1" target="_blank" rel="external">Git在线练习</a>  </li>
<li><a href="http://www.git-tower.com/blog/assets/2013-05-22-git-cheat-sheet/cheat-sheet-large01.png" target="_blank" rel="external">Git Cheat Sheet</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/05/24/Git初学笔记/" data-id="ciokv02nj0002f8jcx48y329y" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/05/24/Android的常见问题汇总/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Android的常见问题汇总</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/05/24/Git初学笔记/">Git学习笔记</a>
          </li>
        
          <li>
            <a href="/2016/05/24/Android的常见问题汇总/">Android的常见问题汇总</a>
          </li>
        
          <li>
            <a href="/2016/05/24/Android-Studio常用插件/">Android Studio常用插件</a>
          </li>
        
          <li>
            <a href="/2016/05/24/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>